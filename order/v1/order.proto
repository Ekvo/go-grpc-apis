syntax = "proto3";

import "google/protobuf/timestamp.proto";

package order.v1;

option go_package = "github.com/Ekvo/go-postgres-apis/order/v1";

// property of one element from the order
message Item {
  string item_id = 1;
  string description = 2;
  int32 quantity = 3;
  int32 unit_price_cents = 4;
}

message Order {
  string id = 1;
  string customer_id = 2;
  repeated Item items = 3;
  google.protobuf.Timestamp created_at = 4;
  google.protobuf.Timestamp updated_at = 5;
}

message CreateOrderRequest {
  string customer_id = 1;
  repeated Item items = 2;
}

message CreateOrderResponse {
  Order order = 1;
}

message GetOrderRequest {
  string id = 1;
}

message GetOrderResponse {
  Order order = 1;
}

message UpdateOrderRequest {
  string order_id = 1;
  repeated Item items = 2;
}

message UpdateOrderResponse {
  Order order = 1;
}

service OrderService {
  rpc NewOrder(CreateOrderRequest) returns (CreateOrderResponse); // Creates a new order
  rpc GetOrder(GetOrderRequest) returns (GetOrderResponse);       // Retrieves an existing order by ID
  rpc UpdateOrder(UpdateOrderRequest) returns (UpdateOrderResponse); // Updates an existing order
}